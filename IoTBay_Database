CREATE TABLE IoT_User
(
Email varchar(30),
Password varchar(16),
FirstName varchar(20),
LastName varchar(20),
PRIMARY KEY(Email)
);

CREATE TABLE Customer
(
MobileNo varchar(10),
Email varchar(30)
);

CREATE TABLE Staff
(
Department varchar(20),
Email varchar(30)
);

CREATE TABLE System_Admin
(
Role varchar(20),
Email varchar(30)
);

CREATE TABLE Product
(
ProductID integer,
Name varchar(50),
Price double,
Manufacturer varchar(50),
Type varchar(50),
QuantityInStock integer,
PRIMARY KEY (ProductID)
);

CREATE TABLE Shipping_Address
(
ShippingID integer,
StreetNo integer,
StreetName varchar(25),
Suburb varchar (25),
State varchar (3),
PostCode integer,
Email varchar(30),
PRIMARY KEY (ShippingID),
FOREIGN KEY (Email) REFERENCES IoT_User(Email)
);

CREATE TABLE Payment_Details
(
PaymentID integer,
CardNo numeric(16),
CardType varchar(25),
CardHolder varchar(50),
ExpirationDate numeric(5),
CVV numeric(3), 
Email varchar(30),
PRIMARY KEY (PaymentID),
FOREIGN KEY (Email) REFERENCES IoT_User(Email)
);

CREATE TABLE IoT_Order
(
OrderID integer,
OrderTime time,
OrderDate date,
ShippedTime time,
ShippedDate date,
Status varchar(10),
Email varchar(30),
ShippingID integer,
PaymentID integer,
PRIMARY KEY (OrderID),
FOREIGN KEY (Email) REFERENCES IoT_User(Email),
FOREIGN KEY (ShippingID) REFERENCES Shipping_Address(ShippingID),
FOREIGN KEY (PaymentID) REFERENCES Payment_Details(PaymentID)
);

CREATE TABLE Order_Detail
(
Quantity integer,
TotalPrice double,
ProductID integer,
OrderID integer,
FOREIGN KEY (ProductID) REFERENCES Product(ProductID),
FOREIGN KEY (OrderID) REFERENCES IoT_Order(OrderID)
);

CREATE TABLE Access_Log
(
AccessID integer,
Activities varchar(50),
LoginTime time,
LoginDate date,
LogoutTime time,
LogoutDate date,
Email varchar(30),
PRIMARY KEY (AccessID),
FOREIGN KEY (Email) REFERENCES IoT_User(Email)
);

CREATE TABLE Order_History
(
HistoryID integer,
OrderID integer,
Email varchar(30),
PRIMARY KEY (HistoryID),
FOREIGN KEY (OrderID) REFERENCES IoT_Order(OrderID),
FOREIGN KEY (Email) REFERENCES IoT_User(Email)
);